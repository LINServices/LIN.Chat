
@code{
    public static Options Context;


    [Parameter]
    public string Name { get; set; } = "";

    [Parameter]
    public Action OnSuccess { get; set; }


    public dynamic Bindo { get; set; }

    public static Genders Default = Genders.Undefined;

    public static async Task Show(string name, string with, Genders genero)
    {
        Default = genero;
        Context.StateHasChanged();
        await App.JS.InvokeVoidAsync("OpenDropDown", name, with);
    }



}
@{
    Context = this;
}





<!-- Dropdown menu -->
<div id="@Name" class="z-10 hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-60 dark:bg-gray-700 dark:divide-gray-600" data-popper-reference-hidden="" data-popper-escaped="" data-popper-placement="top" style="position: absolute; inset: auto auto 0px 0px; margin: 0px; transform: translate3d(522.5px, 6119.5px, 0px);">
    <ul class="p-3 space-y-1 text-sm text-gray-700 dark:text-gray-200" aria-labelledby="dropdownHelperRadioButton">
        <li>
            <div class="flex p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-600" @onclick="()=>HandleRadioClick(Genders.Male)">
                <div class="flex items-center h-5">
                   
                    @if (Default == Genders.Male)
                    {
                        <input id="helper-radio-4" checked name="helper-radio" type="radio" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-700 dark:focus:ring-offset-gray-700 focus:ring-2 dark:bg-gray-600 dark:border-gray-500">
                    }
                    else
                    {
                        <input id="helper-radio-4" name="helper-radio" type="radio" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-700 dark:focus:ring-offset-gray-700 focus:ring-2 dark:bg-gray-600 dark:border-gray-500">
                    }    
                    
                </div>
                <div class="ml-2 text-sm">
                    <label for="helper-radio-4" class="font-medium text-gray-900 dark:text-gray-300">
                        <div>Masculino</div>
                        <p id="helper-radio-text-4" class="text-xs font-normal text-gray-500 dark:text-gray-300">Genero masculino.</p>
                    </label>
                </div>
            </div>
        </li>
        <li>
            <div class="flex p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-600" @onclick="()=>HandleRadioClick(Genders.Female)">
                <div class="flex items-center h-5">

                    @if (Default == Genders.Female)
                    {
                        <input id="helper-radio-4" checked name="helper-radio" type="radio" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-700 dark:focus:ring-offset-gray-700 focus:ring-2 dark:bg-gray-600 dark:border-gray-500">
                    }
                    else
                    {
                        <input id="helper-radio-4" name="helper-radio" type="radio" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-700 dark:focus:ring-offset-gray-700 focus:ring-2 dark:bg-gray-600 dark:border-gray-500">
                    }

                </div>
                <div class="ml-2 text-sm">
                    <label for="helper-radio-5" class="font-medium text-gray-900 dark:text-gray-300">
                        <div>Femenino</div>
                        <p id="helper-radio-text-5" class="text-xs font-normal text-gray-500 dark:text-gray-300">Genero femenino</p>
                    </label>
                </div>
            </div>
        </li>
        <li>
            <div class="flex p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-600" @onclick="()=>HandleRadioClick(Genders.Undefined)">
                <div class="flex items-center h-5">
                    @if (Default == Genders.Undefined)
                    {
                        <input id="helper-radio-4" checked name="helper-radio" type="radio" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-700 dark:focus:ring-offset-gray-700 focus:ring-2 dark:bg-gray-600 dark:border-gray-500">
                    }
                    else
                    {
                        <input id="helper-radio-4" name="helper-radio" type="radio" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-700 dark:focus:ring-offset-gray-700 focus:ring-2 dark:bg-gray-600 dark:border-gray-500">
                    }
            
                </div>
                <div class="ml-2 text-sm">
                    <label for="helper-radio-6" class="font-medium text-gray-900 dark:text-gray-300">
                        <div>Indefinido</div>
                        <p id="helper-radio-text-6" class="text-xs font-normal text-gray-500 dark:text-gray-300">Prefiero no decirlo.</p>
                    </label>
                </div>
            </div>
        </li>
    </ul>
</div>

@code{


    private async void HandleRadioClick(Genders sexo)
    {

        if (Default == sexo)
        {
            return;
        }
        Default = sexo;
        base.StateHasChanged();
        var response =  await LIN.Access.Controllers.User.UpdateGender(LIN.Access.Developer.Session.Instance.Token, sexo);


        if (response.Response == Responses.Success)
        {
            LIN.Access.Developer.Session.Instance.Account.Genero = sexo;
            OnSuccess?.Invoke();

        }
   

    }

                    }